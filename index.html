<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Label Creator - CRUD App</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-text">
                    <h1>üè∑Ô∏è Label Creator</h1>
                    <p>Create, manage, and organize your custom labels</p>
                </div>
                <button type="button" class="btn btn-help" id="help-btn">? Help</button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tabs-container">
            <div class="tabs-nav">
                <button type="button" class="tab-btn active" data-tab="presets">Ingredient List</button>
                <button type="button" class="tab-btn" data-tab="label">Create Label</button>
                <button type="button" class="tab-btn" data-tab="labels">My Labels</button>
                <button type="button" class="tab-btn" data-tab="business">Business</button>
            </div>

            <!-- Tab Panel: Ingredient List (formerly Presets) -->
            <div class="tab-panel active" id="tab-presets">
                <div class="preset-container">
                    <div class="preset-header">
                        <h2>Ingredient List</h2>
                        <div class="preset-header-actions">
                            <div class="sort-buttons">
                                <button type="button" class="btn btn-sort" id="sort-az" title="Sort A-Z">
                                    A-Z ‚Üì
                                </button>
                                <button type="button" class="btn btn-sort" id="sort-za" title="Sort Z-A">
                                    Z-A ‚Üì
                                </button>
                            </div>
                            <button type="button" class="btn btn-toggle" id="toggle-preset-form">
                                + New Ingredient
                            </button>
                        </div>
                    </div>

                    <!-- Ingredient Creation/Edit Form -->
                    <div class="preset-form-wrapper" id="preset-form-wrapper" style="display: none;">
                        <h3 id="preset-form-title">Create New Ingredient</h3>
                        <form id="preset-form">
                            <div class="form-group">
                                <label for="preset-name">Ingredient Name *</label>
                                <input type="text" id="preset-name" placeholder="e.g., Cookie Base, Vanilla Frosting"
                                    required maxlength="50">
                                <span class="error-message" id="preset-name-error"></span>
                            </div>

                            <div class="form-group">
                                <label for="preset-brand-name">Brand Name <small class="form-hint">(Optional - for
                                        organization only, not shown on labels)</small></label>
                                <input type="text" id="preset-brand-name" placeholder="e.g., King Arthur, Domino"
                                    maxlength="50">
                            </div>

                            <div class="form-group">
                                <label for="preset-ingredients">Sub-Ingredients *</label>
                                <textarea id="preset-ingredients"
                                    placeholder="Enter ingredients separated by commas&#10;e.g., All-purpose flour, Whole wheat flour, Bread flour"
                                    rows="3" required maxlength="500"></textarea>
                                <small class="form-hint">Separate multiple ingredients with commas.</small>
                                <span class="error-message" id="preset-ingredients-error"></span>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="preset-submit-btn">
                                    Create Ingredient
                                </button>
                                <button type="button" class="btn btn-secondary" id="preset-cancel-btn">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Ingredients Display -->
                    <div id="presets-list" class="presets-list">
                        <!-- Ingredients will be dynamically inserted here -->
                    </div>

                    <div id="presets-empty-state" class="empty-state">
                        <p>üì¶ No ingredients yet. Create your first ingredient above!</p>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: Label Creation -->
            <div class="tab-panel" id="tab-label">
                <!-- Business Info Warning Overlay -->
                <div class="business-warning-overlay" id="business-warning-overlay">
                    <div class="business-warning-content">
                        <h3>‚ö†Ô∏è Business Information Required</h3>
                        <p>Please fill out your business information before creating labels. This information is
                            required for FDA-compliant food labels.</p>
                        <button type="button" class="btn btn-primary" id="go-to-business-btn">Go to Business
                            Tab</button>
                    </div>
                </div>

                <div class="form-container">
                    <h2 id="form-title">Create Labels</h2>
                    <form id="label-form">
                        <div class="form-group">
                            <label for="label-name">Label Name *</label>
                            <input type="text" id="label-name" placeholder="e.g., Cookie Mix, Bread Ingredients"
                                maxlength="50" required>
                            <span class="error-message" id="name-error"></span>
                        </div>
                        <div class="form-group">
                            <label for="creation-mode">Creation Mode *</label>
                            <select id="creation-mode" required>
                                <option value="manual">Manual Entry</option>
                                <option value="preset" selected>From Ingredient List</option>
                            </select>
                        </div>

                        <div class="form-group" id="manual-input-group" style="display: none;">
                            <label for="label-text">Label Text *</label>
                            <input type="text" id="label-text" placeholder="e.g., Flour" maxlength="50">
                            <span class="error-message" id="text-error"></span>
                        </div>

                        <div class="form-group" id="preset-select-group">
                            <label>Select Ingredients <small class="form-hint">(Select one or more)</small></label>
                            <div id="preset-checkboxes" class="preset-checkboxes">
                                <!-- Ingredient checkboxes will be dynamically inserted here -->
                            </div>
                            <span class="error-message" id="preset-select-error"></span>
                        </div>

                        <div class="form-group" id="additional-ingredients-group">
                            <label for="additional-ingredients">Additional Ingredients <small
                                    class="form-hint">(Optional)</small></label>
                            <input type="text" id="additional-ingredients" placeholder="e.g., Chocolate Chips, Walnuts">
                            <span class="form-hint">Add extra ingredients separated by commas. These will be combined
                                with
                                selected ingredients.</span>
                        </div>

                        <!-- FDA Food Labeling Fields -->
                        <div class="form-section-divider">
                            <span>FDA Label Requirements</span>
                        </div>

                        <div class="form-group">
                            <label for="net-quantity">Net Quantity of Contents *</label>
                            <div class="input-with-unit">
                                <input type="number" id="net-quantity" placeholder="e.g., 2" min="0" step="0.01"
                                    required>
                                <select id="net-quantity-unit">
                                    <option value="oz">oz (ounces)</option>
                                    <option value="lb">lb (pounds)</option>
                                    <option value="g">g (grams)</option>
                                    <option value="fl oz">fl oz (fluid ounces)</option>
                                    <option value="pt">pt (pints)</option>
                                    <option value="mL">mL (milliliters)</option>
                                    <option value="L">L (liters)</option>
                                    <option value="pieces">pieces</option>
                                </select>
                            </div>
                            <span class="error-message" id="quantity-error"></span>
                        </div>

                        <div class="form-group">
                            <label>Allergen Declaration <small class="form-hint">(Select all that apply)</small></label>
                            <div class="allergen-checkboxes">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Milk"> Milk
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Eggs"> Eggs
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Wheat"> Wheat
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Soy"> Soy
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Peanuts"> Peanuts
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Sesame"> Sesame
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Tree Nuts"> Tree Nuts
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Fish"> Fish
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Shellfish"> Shellfish
                                </label>
                            </div>
                            <input type="text" id="allergen-details"
                                placeholder="Specify details (e.g., Almonds, Walnuts for Tree Nuts; Salmon for Fish)">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="submit-btn">
                                Create Label(s)
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancel-btn" style="display: none;">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Label Preview -->
                <div class="preview-section">
                    <div class="section-header">
                        <h2>Label Preview</h2>
                        <button type="button" class="btn btn-copy" id="copy-preview-btn">üìã Copy</button>
                    </div>
                    <div id="label-preview" class="label-preview-card">
                        <p class="preview-placeholder">Fill out the form above to see a preview of your label</p>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: My Labels -->
            <div class="tab-panel" id="tab-labels">
                <div class="labels-section">
                    <div class="section-header">
                        <h2>Your Labels</h2>
                        <span class="label-count" id="label-count">0 labels</span>
                    </div>

                    <div id="labels-container" class="labels-grid">
                        <!-- Labels will be dynamically inserted here -->
                    </div>

                    <div id="empty-state" class="empty-state">
                        <p>No labels yet. Create your first label in the "Create Label" tab!</p>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: Business Info -->
            <div class="tab-panel" id="tab-business">
                <div class="form-container">
                    <h2>Business Information</h2>

                    <p class="form-hint business-info-hint">
                        Business info is saved and will auto-fill for all labels. Changes here apply to future
                        labels only.
                    </p>

                    <div class="form-group">
                        <label for="business-name">Business Name *</label>
                        <input type="text" id="business-name" placeholder="e.g., Sweet Treats Bakery" maxlength="100">
                        <span class="error-message" id="business-name-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="business-address">Street Address *</label>
                        <input type="text" id="business-address" placeholder="e.g., 280 S. Decatur Blvd."
                            maxlength="100">
                    </div>

                    <div class="form-row">
                        <div class="form-group form-group-half">
                            <label for="business-city">City *</label>
                            <input type="text" id="business-city" placeholder="e.g., Las Vegas" maxlength="50">
                        </div>
                        <div class="form-group form-group-quarter">
                            <label for="business-state">State *</label>
                            <input type="text" id="business-state" placeholder="NV" maxlength="2">
                        </div>
                        <div class="form-group form-group-quarter">
                            <label for="business-zip">ZIP *</label>
                            <input type="text" id="business-zip" placeholder="89107" maxlength="10">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="business-phone">Phone Number <small class="form-hint">(Optional)</small></label>
                        <input type="tel" id="business-phone" placeholder="e.g., (702) 759-1000">
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label cottage-disclaimer-label">
                            <input type="checkbox" id="cottage-disclaimer" checked>
                            <span>Include Cottage Food Disclaimer on labels</span>
                        </label>
                        <span class="form-hint">Adds: "MADE IN A COTTAGE FOOD OPERATION THAT IS NOT SUBJECT TO
                            GOVERNMENT FOOD SAFETY INSPECTION"</span>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" id="save-business-btn">
                            üíæ Save Business Info
                        </button>
                    </div>
                </div>
            </div>
        </div><!-- End tabs-container -->

        <!-- Help Modal -->
        <div id="help-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content help-modal-content">
                <div class="modal-header">
                    <h2>üìñ How to Use Label Creator</h2>
                    <button type="button" class="modal-close" id="help-close">&times;</button>
                </div>
                <!-- Help Tab Navigation -->
                <div class="help-tabs-nav">
                    <button type="button" class="help-tab-btn active" data-help-tab="quick-start">üöÄ Quick
                        Start</button>
                    <button type="button" class="help-tab-btn" data-help-tab="setup">üîß Setup</button>
                    <button type="button" class="help-tab-btn" data-help-tab="creating">üè∑Ô∏è Creating</button>
                    <button type="button" class="help-tab-btn" data-help-tab="managing">üìÇ Managing</button>
                    <button type="button" class="help-tab-btn" data-help-tab="fda">üìú FDA Info</button>
                </div>
                <div class="modal-body help-modal-body">
                    <!-- Quick Start Tab -->
                    <div class="help-tab-panel active" id="help-tab-quick-start">
                        <section class="help-section">
                            <h3>üöÄ Quick Start Guide</h3>
                            <p>Label Creator helps you create FDA-compliant food labels for cottage food operations.
                                Follow these steps:</p>
                            <ol>
                                <li><strong>Set up your business info</strong> in the Business tab (required)</li>
                                <li><strong>Create ingredients</strong> in the Ingredient List tab (optional)</li>
                                <li><strong>Create labels</strong> using ingredients or manual entry</li>
                                <li><strong>Copy and use</strong> your formatted labels anywhere</li>
                            </ol>
                        </section>
                    </div>

                    <!-- Setup Tab -->
                    <div class="help-tab-panel" id="help-tab-setup">
                        <section class="help-section">
                            <h3>üè¢ Business Information</h3>
                            <p>FDA requires your business info on all food labels. <strong>Complete this
                                    first.</strong></p>
                            <ol>
                                <li>Click the <strong>"Business"</strong> tab (shows ‚ùó if incomplete)</li>
                                <li>Enter your business name and complete address</li>
                                <li>Phone number is optional but recommended</li>
                                <li>Check the cottage food disclaimer box if applicable</li>
                                <li>Click <strong>"üíæ Save Business Info"</strong></li>
                            </ol>
                            <p><em>‚úì Once saved, the tab shows a checkmark and auto-fills on all labels.</em></p>
                        </section>
                        <section class="help-section">
                            <h3>üß© Ingredient List</h3>
                            <p>Ingredients are reusable ingredient groups that save time.</p>
                            <ol>
                                <li>Go to the <strong>"Ingredient List"</strong> tab</li>
                                <li>Click <strong>"+ New Ingredient"</strong></li>
                                <li>Enter a name (e.g., "Cookie Base", "Vanilla Frosting")</li>
                                <li>Enter sub-ingredients separated by commas</li>
                                <li>Click <strong>"Create Ingredient"</strong></li>
                            </ol>
                            <p><strong>Edit/Delete:</strong> Use ‚úèÔ∏è Edit or üóëÔ∏è Delete buttons on each ingredient.</p>
                        </section>
                    </div>

                    <!-- Creating Labels Tab -->
                    <div class="help-tab-panel" id="help-tab-creating">
                        <section class="help-section">
                            <h3>üè∑Ô∏è Creating Labels</h3>
                            <p><strong>From Ingredient List Mode (Recommended):</strong></p>
                            <ol>
                                <li>Go to <strong>"Create Label"</strong> tab</li>
                                <li>Enter a <strong>Label Name</strong> (product name)</li>
                                <li>Set mode to <strong>"From Ingredient List"</strong></li>
                                <li>Check one or more ingredients to combine</li>
                                <li>Add optional extra ingredients</li>
                                <li>Enter <strong>Net Quantity</strong> and select <strong>allergens</strong></li>
                                <li>Click <strong>"Create Label(s)"</strong></li>
                            </ol>
                            <p><strong>Manual Entry:</strong> Set mode to "Manual Entry" and type ingredients directly.
                            </p>
                        </section>
                        <section class="help-section">
                            <h3>üëÅÔ∏è Preview & Copy</h3>
                            <p>The <strong>Label Preview</strong> shows a live preview as you fill out the form.</p>
                            <ul>
                                <li>After creating, click <strong>"üìã Copy"</strong> next to the preview</li>
                                <li>Label copies as <strong>rich text</strong> with formatting preserved</li>
                                <li>Paste into Google Docs, Word, Canva, or any rich text editor</li>
                            </ul>
                        </section>
                    </div>

                    <!-- Managing Tab -->
                    <div class="help-tab-panel" id="help-tab-managing">
                        <section class="help-section">
                            <h3>üìÇ Managing Your Labels</h3>
                            <p>View and manage labels in the <strong>"My Labels"</strong> tab.</p>
                            <ul>
                                <li><strong>‚úèÔ∏è Edit:</strong> Modify label details (opens in Create Label tab)</li>
                                <li><strong>üìã Copy:</strong> Copy formatted label to clipboard</li>
                                <li><strong>üóëÔ∏è Delete:</strong> Remove permanently (confirmation required)</li>
                            </ul>
                            <p><em>Note: Click "Update Label" after editing to save changes.</em></p>
                        </section>
                    </div>

                    <!-- FDA Info Tab -->
                    <div class="help-tab-panel" id="help-tab-fda">
                        <section class="help-section">
                            <h3>üìú FDA Requirements</h3>
                            <p>For cottage food operations, labels must include:</p>
                            <ul>
                                <li><strong>Statement of Identity:</strong> Product name</li>
                                <li><strong>Net Quantity:</strong> Weight or volume (e.g., "8 oz")</li>
                                <li><strong>Ingredients:</strong> Listed by weight (heaviest first)</li>
                                <li><strong>Allergens:</strong> The 9 major food allergens</li>
                                <li><strong>Business Info:</strong> Name and complete address</li>
                                <li><strong>Cottage Disclaimer:</strong> Required for home-prepared foods</li>
                            </ul>
                        </section>
                        <section class="help-section">
                            <h3>‚ö†Ô∏è Allergen Declaration</h3>
                            <p>The <strong>9 major allergens:</strong> Milk, Eggs, Wheat, Soy, Peanuts, Sesame, Tree
                                Nuts, Fish, Shellfish</p>
                            <ul>
                                <li>Check all allergens present in your product</li>
                                <li>For Tree Nuts/Fish/Shellfish, specify the type (e.g., "Almonds, Walnuts")</li>
                            </ul>
                            <p><em>‚ö†Ô∏è Include allergens from sub-ingredients and cross-contamination.</em></p>
                        </section>
                        <section class="help-section">
                            <h3>üí° Pro Tips</h3>
                            <ul>
                                <li><strong>Weight order:</strong> List ingredients heaviest first</li>
                                <li><strong>Consistent naming:</strong> Use same names across ingredients</li>
                                <li><strong>Auto-save:</strong> Labels persist between sessions</li>
                                <li><strong>Combine ingredients:</strong> Check multiple to merge ingredients</li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast-container"></div>

        <script src="app.js"></script>
</body>

</html>