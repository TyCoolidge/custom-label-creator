<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Label Creator - CRUD App</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-text">
                    <h1>üè∑Ô∏è Label Creator</h1>
                    <p>Create, manage, and organize your custom labels</p>
                </div>
                <button type="button" class="btn btn-help" id="help-btn">? Help</button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tabs-container">
            <div class="tabs-nav">
                <button type="button" class="tab-btn active" data-tab="presets">Presets</button>
                <button type="button" class="tab-btn" data-tab="label">Create Label</button>
                <button type="button" class="tab-btn" data-tab="labels">My Labels</button>
                <button type="button" class="tab-btn" data-tab="business">Business</button>
            </div>

            <!-- Tab Panel: Presets -->
            <div class="tab-panel active" id="tab-presets">
                <div class="preset-container">
                    <div class="preset-header">
                        <h2>Ingredient Presets</h2>
                        <button type="button" class="btn btn-toggle" id="toggle-preset-form">
                            + New Preset
                        </button>
                    </div>

                    <!-- Preset Creation/Edit Form -->
                    <div class="preset-form-wrapper" id="preset-form-wrapper" style="display: none;">
                        <h3 id="preset-form-title">Create New Preset</h3>
                        <form id="preset-form">
                            <div class="form-group">
                                <label for="preset-name">Preset Name *</label>
                                <input type="text" id="preset-name" placeholder="e.g., Flour, Sugar" required
                                    maxlength="50">
                                <span class="error-message" id="preset-name-error"></span>
                            </div>

                            <div class="form-group">
                                <label for="preset-ingredients">Ingredients *</label>
                                <textarea id="preset-ingredients"
                                    placeholder="Enter ingredients separated by commas&#10;e.g., All-purpose flour, Whole wheat flour, Bread flour"
                                    rows="3" required maxlength="500"></textarea>
                                <small class="form-hint">Separate multiple ingredients with commas.</small>
                                <span class="error-message" id="preset-ingredients-error"></span>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="preset-submit-btn">
                                    Create Preset
                                </button>
                                <button type="button" class="btn btn-secondary" id="preset-cancel-btn">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Presets Display -->
                    <div id="presets-list" class="presets-list">
                        <!-- Presets will be dynamically inserted here -->
                    </div>

                    <div id="presets-empty-state" class="empty-state">
                        <p>üì¶ No presets yet. Create your first preset above!</p>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: Label Creation -->
            <div class="tab-panel" id="tab-label">
                <!-- Business Info Warning Overlay -->
                <div class="business-warning-overlay" id="business-warning-overlay">
                    <div class="business-warning-content">
                        <h3>‚ö†Ô∏è Business Information Required</h3>
                        <p>Please fill out your business information before creating labels. This information is
                            required for FDA-compliant food labels.</p>
                        <button type="button" class="btn btn-primary" id="go-to-business-btn">Go to Business
                            Tab</button>
                    </div>
                </div>

                <div class="form-container">
                    <h2 id="form-title">Create Labels</h2>
                    <form id="label-form">
                        <div class="form-group">
                            <label for="label-name">Label Name *</label>
                            <input type="text" id="label-name" placeholder="e.g., Cookie Mix, Bread Ingredients"
                                maxlength="50" required>
                            <span class="error-message" id="name-error"></span>
                        </div>
                        <div class="form-group">
                            <label for="creation-mode">Creation Mode *</label>
                            <select id="creation-mode" required>
                                <option value="manual">Manual Entry</option>
                                <option value="preset" selected>From Preset</option>
                            </select>
                        </div>

                        <div class="form-group" id="manual-input-group" style="display: none;">
                            <label for="label-text">Label Text *</label>
                            <input type="text" id="label-text" placeholder="e.g., Flour" maxlength="50">
                            <span class="error-message" id="text-error"></span>
                        </div>

                        <div class="form-group" id="preset-select-group">
                            <label>Select Presets <small class="form-hint">(Select one or more)</small></label>
                            <div id="preset-checkboxes" class="preset-checkboxes">
                                <!-- Preset checkboxes will be dynamically inserted here -->
                            </div>
                            <span class="error-message" id="preset-select-error"></span>
                        </div>

                        <div class="form-group" id="additional-ingredients-group">
                            <label for="additional-ingredients">Additional Ingredients <small
                                    class="form-hint">(Optional)</small></label>
                            <input type="text" id="additional-ingredients" placeholder="e.g., Chocolate Chips, Walnuts">
                            <span class="form-hint">Add extra ingredients separated by commas. These will be combined
                                with
                                preset ingredients.</span>
                        </div>

                        <!-- FDA Food Labeling Fields -->
                        <div class="form-section-divider">
                            <span>FDA Label Requirements</span>
                        </div>

                        <div class="form-group">
                            <label for="net-quantity">Net Quantity of Contents *</label>
                            <div class="input-with-unit">
                                <input type="number" id="net-quantity" placeholder="e.g., 2" min="0" step="0.01"
                                    required>
                                <select id="net-quantity-unit">
                                    <option value="oz">oz (ounces)</option>
                                    <option value="lb">lb (pounds)</option>
                                    <option value="g">g (grams)</option>
                                    <option value="fl oz">fl oz (fluid ounces)</option>
                                    <option value="pt">pt (pints)</option>
                                    <option value="mL">mL (milliliters)</option>
                                    <option value="L">L (liters)</option>
                                    <option value="pieces">pieces</option>
                                </select>
                            </div>
                            <span class="error-message" id="quantity-error"></span>
                        </div>

                        <div class="form-group">
                            <label>Allergen Declaration <small class="form-hint">(Select all that apply)</small></label>
                            <div class="allergen-checkboxes">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Milk"> Milk
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Eggs"> Eggs
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Wheat"> Wheat
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Soy"> Soy
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Peanuts"> Peanuts
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Sesame"> Sesame
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Tree Nuts"> Tree Nuts
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Fish"> Fish
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="allergen" value="Shellfish"> Shellfish
                                </label>
                            </div>
                            <input type="text" id="allergen-details"
                                placeholder="Specify details (e.g., Almonds, Walnuts for Tree Nuts; Salmon for Fish)">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="submit-btn">
                                Create Label(s)
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancel-btn" style="display: none;">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Label Preview -->
                <div class="preview-section">
                    <div class="section-header">
                        <h2>Label Preview</h2>
                        <button type="button" class="btn btn-copy" id="copy-preview-btn">üìã Copy</button>
                    </div>
                    <div id="label-preview" class="label-preview-card">
                        <p class="preview-placeholder">Fill out the form above to see a preview of your label</p>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: My Labels -->
            <div class="tab-panel" id="tab-labels">
                <div class="labels-section">
                    <div class="section-header">
                        <h2>Your Labels</h2>
                        <span class="label-count" id="label-count">0 labels</span>
                    </div>

                    <div id="labels-container" class="labels-grid">
                        <!-- Labels will be dynamically inserted here -->
                    </div>

                    <div id="empty-state" class="empty-state">
                        <p>No labels yet. Create your first label in the "Create Label" tab!</p>
                    </div>
                </div>
            </div>

            <!-- Tab Panel: Business Info -->
            <div class="tab-panel" id="tab-business">
                <div class="form-container">
                    <h2>Business Information</h2>

                    <p class="form-hint business-info-hint">
                        Business info is saved and will auto-fill for all labels. Changes here apply to future
                        labels only.
                    </p>

                    <div class="form-group">
                        <label for="business-name">Business Name *</label>
                        <input type="text" id="business-name" placeholder="e.g., Sweet Treats Bakery" maxlength="100">
                        <span class="error-message" id="business-name-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="business-address">Street Address *</label>
                        <input type="text" id="business-address" placeholder="e.g., 280 S. Decatur Blvd."
                            maxlength="100">
                    </div>

                    <div class="form-row">
                        <div class="form-group form-group-half">
                            <label for="business-city">City *</label>
                            <input type="text" id="business-city" placeholder="e.g., Las Vegas" maxlength="50">
                        </div>
                        <div class="form-group form-group-quarter">
                            <label for="business-state">State *</label>
                            <input type="text" id="business-state" placeholder="NV" maxlength="2">
                        </div>
                        <div class="form-group form-group-quarter">
                            <label for="business-zip">ZIP *</label>
                            <input type="text" id="business-zip" placeholder="89107" maxlength="10">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="business-phone">Phone Number <small class="form-hint">(Optional)</small></label>
                        <input type="tel" id="business-phone" placeholder="e.g., (702) 759-1000">
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label cottage-disclaimer-label">
                            <input type="checkbox" id="cottage-disclaimer" checked>
                            <span>Include Cottage Food Disclaimer on labels</span>
                        </label>
                        <span class="form-hint">Adds: "MADE IN A COTTAGE FOOD OPERATION THAT IS NOT SUBJECT TO
                            GOVERNMENT FOOD SAFETY INSPECTION"</span>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" id="save-business-btn">
                            üíæ Save Business Info
                        </button>
                    </div>
                </div>
            </div>
        </div><!-- End tabs-container -->

        <!-- Help Modal -->
        <div id="help-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìñ How to Use Label Creator</h2>
                    <button type="button" class="modal-close" id="help-close">&times;</button>
                </div>
                <div class="modal-body">
                    <section class="help-section">
                        <h3>üß© Creating Presets</h3>
                        <p>Presets are reusable ingredient groups. Click <strong>"+ New Preset"</strong> in the
                            Ingredient
                            Presets section, give it a name, and enter ingredients separated by commas.</p>
                    </section>

                    <section class="help-section">
                        <h3>üè∑Ô∏è Creating Labels</h3>
                        <p>You have two modes for creating labels:</p>
                        <ul>
                            <li><strong>Manual Entry:</strong> Type ingredients directly into the text area,
                                separated by
                                commas.</li>
                            <li><strong>From Preset:</strong> Select one or more presets to automatically include
                                their
                                ingredients.</li>
                        </ul>
                    </section>

                    <section class="help-section">
                        <h3>‚òëÔ∏è Selecting Multiple Presets</h3>
                        <p>In "From Preset" mode, check multiple preset boxes to combine ingredients from different
                            presets
                            into one label.</p>
                    </section>

                    <section class="help-section">
                        <h3>‚ûï Adding Extra Ingredients</h3>
                        <p>When using preset mode, you can add additional ingredients in the "Additional
                            Ingredients" field.
                            These will be appended after the preset ingredients.</p>
                    </section>

                    <section class="help-section">
                        <h3>‚úèÔ∏è Editing & Deleting</h3>
                        <p>Use the <strong>Edit</strong> button to modify any preset or label. Use the
                            <strong>Delete</strong> button to remove items (you'll be asked to confirm).
                        </p>
                    </section>

                    <section class="help-section">
                        <h3>üìã Label Format</h3>
                        <p>When creating labels from presets, ingredients are organized by preset:</p>
                        <code>[Preset Name]: (ingredient1, ingredient2), [Another Preset]: (ingredient3, ingredient4)</code>
                        <p>Additional manual ingredients appear at the end.</p>
                    </section>

                    <section class="help-section">
                        <h3>üìú FDA Label Requirements</h3>
                        <p>For cottage food operations, labels must include:</p>
                        <ul>
                            <li><strong>Statement of Identity:</strong> The product name (Label Name field)</li>
                            <li><strong>Net Quantity:</strong> Weight or volume of contents</li>
                            <li><strong>Ingredient Statement:</strong> All ingredients in descending order by weight
                            </li>
                            <li><strong>Allergen Declaration:</strong> Required for milk, eggs, wheat, soy, peanuts,
                                sesame,
                                tree nuts, fish, and shellfish</li>
                            <li><strong>Business Info:</strong> Name and full address of manufacturer</li>
                            <li><strong>Cottage Food Disclaimer:</strong> Required statement for home-prepared foods
                            </li>
                        </ul>
                    </section>

                    <section class="help-section">
                        <h3>‚ö†Ô∏è Allergen Declaration</h3>
                        <p>Select all allergens present in your product. For tree nuts, fish, and shellfish, specify
                            the
                            exact species in the details field (e.g., "Almonds, Walnuts" or "Salmon, Tuna").</p>
                    </section>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast-container"></div>

        <script src="app.js"></script>
</body>

</html>